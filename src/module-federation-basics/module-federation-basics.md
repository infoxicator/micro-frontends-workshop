# Module Federation Basics

## Introduction

**TLDR** Module Federation is a webpack plugin that allows you to dynamically load remote modules at runtime. It allows you to share modules between different applications.

## Understanding Module Federation

- A **host** is an application that consumes code, modules or components from a remote modules.
- A **remote** is an application that exposes modules to be consumed by a host.
- **remoteEntry.js** is a file that is generated by webpack and contains the exposed modules.

Plugin Options for Module Federation:

- **name** - The name of the remote. This is used to reference the remote entry in the host application.
- **filename** - The name of the file that is generated by webpack and contain the exposed modules. (default: remoteEntry.js)
- **remotes** - A list of remote applications that are consumed by the host application.
- **exposes** - A list of modules that are exposed by the remote application.
- **shared** - A list of modules that are shared between the host and remote applications.

webpack.config.js
```js
const ModuleFederationPlugin = require("webpack/lib/container/ModuleFederationPlugin");

new ModuleFederationPlugin({
  name: "host",
  filename: "remoteEntry.js",
  remotes: {
    remote: "remote@http://localhost:3001/remoteEntry.js",
  },
  exposes: {
    "./Button": "./src/Button",
  },
  shared: ["react", "react-dom"],
});
```

## Local Development

Applications should be able to run independently or inside a container (host).

Remote applications can have their own index.html files to render independently, however, when running in production inside a host, the host will render the remote application using the host's index.html file.

## Excercise ðŸ’ª

### Consuming Remote Modules

This project has 3 applications:

- **host** - The host application that consumes remote modules and it is served locally on `http://localhost:8080`.
- **products** A remote application that exposes a list of products, served on `http://localhost:8081`.
- **cart** A remote application that exposes a cart component, served on `http://localhost:8082`.

1. Open the `webpack-config.js` in the `products` folder and add the `ModuleFederationPlugin` exposing the `'./src/product-list'` component.

2. Open the `webpack-config.js` in the `cart` folder and add the `ModuleFederationPlugin` exposing the `'./src/cart'` component.

3. Open the `webpack-config.js` in the `host` folder and add the `ModuleFederationPlugin` to consume the `products` and `cart` remote modules.

4. import the `products` and `cart` components in the `host` application and render them.

**TipðŸ’¡**: 
To import the remotes you just need to import it as a normal component referencing the remote name and the exposed module.

```js
 import RemoteComponent from 'remoteName/ExposedModule' 
 ```


## Extra Credit ðŸ¥‡

### Sharing Dependencies

Share the `react` and `react-dom` between the host and remote applications and mark them as `singletons`.

Share `@faker-js/faker` and any other installed dependencies.
